"use strict";(self.webpackChunkranger=self.webpackChunkranger||[]).push([[853],{1659:(e,t,a)=>{a.d(t,{A:()=>s});var l=a(6540),n=a(8106);function r(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);t&&(l=l.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,l)}return a}function o(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?r(Object(a),!0).forEach((function(t){i(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):r(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function i(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const s=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];!function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],{navigator:a}=(0,l.useContext)(n.jb);(0,l.useEffect)((()=>{if(t){var l=a.block((t=>{var a=o(o({},t),{},{retry(){l(),setTimeout((()=>{t.retry()}),0)}});e(a)}));return l}}),[a,e,t])}((0,l.useCallback)((t=>{window.confirm(e)&&t.retry()}),[e]),t)}},2853:(e,t,a)=>{a.r(t),a.d(t,{default:()=>pe});var l=a(6540),n=a(2735),r=a(4479),o=a(1105),i=a(475),s=a(6052),c=a(5615),u=a(4468),m=a(2465),d=a(952),v=a(3943),p=a(239),f=a.n(p),y=a(924),E=a(2543),g=a(6474),b=a(5787),h=a(3267),A=a(1376),N=a(9007),D=a(2431),P=a(3088),x=a(8539),w=a(7744),k=a(5564),S=a(3666);function O(){return O=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var l in a)Object.prototype.hasOwnProperty.call(a,l)&&(e[l]=a[l])}return e},O.apply(this,arguments)}function C(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);t&&(l=l.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,l)}return a}function I(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?C(Object(a),!0).forEach((function(t){R(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):C(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function R(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var T={label:"None",value:"none"};function M(e){var t,{addPolicyItem:a,attrName:n,serviceCompDetails:r,fetchUsersData:s,fetchGroupsData:u,fetchRolesData:m,formValues:v,changePolicyItemPermissions:p,isMultiResources:f}=e,y=(0,l.useRef)(),h=(0,l.useRef)(),N=l.useRef(null),[C,R]=(0,l.useState)([]),[M,j]=(0,l.useState)([]),[F,L]=(0,l.useState)([]),[Y,K]=(0,l.useState)(!1),[G,H]=(0,l.useState)(!1),[z,V]=(0,l.useState)(!1),_=["Select Roles","Select Groups","Select Users"];(null==r||null===(t=r.policyConditions)||void 0===t?void 0:t.length)>0&&_.push("Policy Conditions"),_.push("Permissions"),A.Kp.RANGER_ACCESS_POLICY_TYPE.value==(null==v?void 0:v.policyType)&&"tag"!==r.name&&_.push("Delegate Admin"),A.Kp.RANGER_MASKING_POLICY_TYPE.value==(null==v?void 0:v.policyType)&&_.push("Select Masking Option"),A.Kp.RANGER_ROW_FILTER_POLICY_TYPE.value==(null==v?void 0:v.policyType)&&_.push("Row Level Filter");var B=(0,l.useMemo)((()=>{var{resources:e=[]}=r,t=(0,E.groupBy)(e,"level"),a=[];for(var l in t)a.push(+l);return a.sort()}),[]),U=()=>{var e=[],t=[];if(e=A.Kp.RANGER_MASKING_POLICY_TYPE.value==v.policyType?r.dataMaskDef.accessTypes:A.Kp.RANGER_ROW_FILTER_POLICY_TYPE.value==v.policyType?r.rowFilterDef.accessTypes:r.accessTypes,p)if(f)(0,E.map)(v.additionalResources,(a=>{for(var l=B.length-1;l>=0;l--){var n="resourceName-".concat(B[l]);if(a[n]&&a[n].value!==T.value){var r;if((null===(r=a[n].accessTypeRestrictions)||void 0===r?void 0:r.length)>0){var o=[];for(var i of a[n].accessTypeRestrictions){var s=(0,E.find)(e,{name:i});s&&o.push(s)}t=[...t,...o]}else t=[...e];break}}})),e=[...new Set(t)];else for(var a=B.length-1;a>=0;a--){var l="resourceName-".concat(B[a]);if(v[l]&&v[l].value!==T.value){var n;if((null===(n=v[l].accessTypeRestrictions)||void 0===n?void 0:n.length)>0){var o=[];for(var i of v[l].accessTypeRestrictions){var s=(0,E.find)(e,{name:i});s&&o.push(s)}e=o}break}}return e.map((e=>{var{label:t,name:a}=e;return{label:t,value:a}}))},q=e=>{var t,a;if((null==r||null===(t=r.dataMaskDef)||void 0===t||null===(a=t.maskTypes)||void 0===a?void 0:a.length)>0){if((null==v?void 0:v.policyType)==A.Kp.RANGER_MASKING_POLICY_TYPE.value&&"tag"==(null==r?void 0:r.name)){var l,n,o,i=null==v||null===(l=v.dataMaskPolicyItems[e])||void 0===l||null===(n=l.accesses)||void 0===n||null===(o=n.tableList[0])||void 0===o?void 0:o.serviceName;return r.dataMaskDef.maskTypes.filter((e=>e.name.includes(i))).map((e=>{var{label:t,name:a}=e;return{label:t,value:a}}))}return r.dataMaskDef.maskTypes.map((e=>{var{label:t,name:a}=e;return{label:t,value:a}}))}},Z=e=>e?void 0:"Required",$=(e,t)=>{if(e&&!(0,E.isEmpty)(e[t])){var a,l,n,o,i,s,c,u,m,d,v,p,f,y=((null===(a=e[t])||void 0===a?void 0:a.users)||[]).length>0,g=((null===(l=e[t])||void 0===l?void 0:l.groups)||[]).length>0,b=((null===(n=e[t])||void 0===n?void 0:n.roles)||[]).length>0,h=null===(o=e[t])||void 0===o?void 0:o.delegateAdmin,A=null===(i=e[t])||void 0===i?void 0:i.conditions;if(m=null!==(s=e[t])&&void 0!==s&&s.accesses&&!(0,E.isArray)(null===(c=e[t])||void 0===c?void 0:c.accesses)?"tag"==(null==r?void 0:r.name)?(0,E.isEmpty)(null===(d=e[t])||void 0===d||null===(v=d.accesses)||void 0===v?void 0:v.tableList)!==(0,E.isEmpty)({}):JSON.stringify((null===(p=e[t])||void 0===p?void 0:p.accesses)||{})!==JSON.stringify({}):((null===(f=e[t])||void 0===f?void 0:f.accesses)||[]).length>0,(y||g||b)&&!m&&(void 0!==h&&!1===h||null==h)&&(u="Please select permision item for selected users/groups/roles"),!m||y||g||b||(void 0!==h&&!1===h||null==h)&&(u="Please select users/groups/roles for selected permission item"),!h||y||g||b||(u="Please select user/group/role for the selected delegate Admin"),A){for(var N in A)null!=A[N]&&""!=A[N]||delete A[N];0==Object.keys(A).length||y||g||b||(u="Please select user/group/role for the entered policy condition")}return u}},J=I(I({},b.eB),{},{control:e=>I(I({},e),{},{width:200,whiteSpace:"nowrap"})});return l.createElement("div",null,l.createElement(o.A,{sm:"12"},l.createElement("div",{className:"table-responsive"},l.createElement(D.A,{bordered:!0,className:"policy-permission-table",id:"".concat(n,"-table")},l.createElement("thead",{className:"thead-light"},l.createElement("tr",null,_.map((e=>l.createElement("th",{key:e},e))),l.createElement("th",null))),l.createElement("tbody",{className:"drag-drop-wrap"},l.createElement(P.ED,{name:n},(e=>{var{fields:t}=e;return t.map(((e,a)=>l.createElement("tr",{key:e,onDragStart:e=>(0,S.bB)(e,a,y),onDragEnter:e=>(0,S.Nn)(e,a,h),onDragEnd:e=>(0,S.gv)(e,t,y,h),onDragOver:e=>(0,S.NQ)(e),draggable:!0,id:a},_.map((o=>{if("Select Roles"==o)return l.createElement("td",{key:o,className:"align-middle"},l.createElement(d.D0,{className:"form-control",name:"".concat(e,".roles"),render:e=>{var{input:t}=e;return l.createElement("div",{className:"d-flex"},l.createElement(x.A,O({},t,{menuPortalTarget:document.body,loadOptions:m,onFocus:()=>{K(!0),m().then((e=>{R(e),K(!1)}))},defaultOptions:C,noOptionsMessage:()=>Y?"Loading...":"No options",styles:J,cacheOptions:!0,isMulti:!0})))}}));if("Select Groups"==o)return l.createElement("td",{key:o,className:"align-middle"},l.createElement(d.D0,{className:"form-control",name:"".concat(e,".groups"),render:e=>{var{input:t}=e;return l.createElement("div",null,l.createElement(x.A,O({},t,{menuPortalTarget:document.body,loadOptions:u,onFocus:()=>{H(!0),u().then((e=>{j(e),H(!1)}))},defaultOptions:M,noOptionsMessage:()=>G?"Loading...":"No options",styles:J,cacheOptions:!0,isMulti:!0})))}}));if("Select Users"==o)return l.createElement("td",{key:o,className:"align-middle"},l.createElement(d.D0,{className:"form-control",name:"".concat(e,".users"),render:e=>{var{input:t}=e;return l.createElement("div",null,l.createElement(x.A,O({},t,{menuPortalTarget:document.body,loadOptions:s,onFocus:()=>{V(!0),s().then((e=>{L(e),V(!1)}))},defaultOptions:F,noOptionsMessage:()=>z?"Loading...":"No options",styles:J,cacheOptions:!0,isMulti:!0})))}}));var f;if("Policy Conditions"==o)return(null==r||null===(f=r.policyConditions)||void 0===f?void 0:f.length)>0&&l.createElement("td",{key:o,className:"align-middle"},l.createElement(d.D0,{className:"form-control",name:"".concat(e,".conditions"),validate:(e,t)=>$(t[n],a),render:e=>{var{input:t}=e;return l.createElement("div",{className:"table-editable"},l.createElement(w.A,O({},t,{placement:"auto",type:"custom",conditionDefVal:(0,S.F4)(r.policyConditions),selectProps:{isMulti:!0}})))}}));if("Permissions"==o){if("tag"==(null==r?void 0:r.name))return l.createElement("td",{key:o,className:"align-middle"},l.createElement(d.D0,{className:"form-control",name:"".concat(e,".accesses"),validate:(e,t)=>$(t[n],a),render:e=>{var{input:t}=e;return l.createElement("div",{className:"table-editable"},l.createElement(k.A,{options:U(),inputVal:t,formValues:v,dataMaskIndex:a,serviceCompDetails:r,attrName:n}))}}));var y=U();return l.createElement("td",{key:o,className:"align-middle"},l.createElement(d.D0,{className:"form-control",name:"".concat(e,".accesses"),validate:(e,t)=>$(t[n],a),render:e=>{var t,{input:r}=e;if(null!==(t=v[n][a])&&void 0!==t&&t.accesses&&(0,E.isArray)(v[n][a].accesses)&&p){var o=(0,E.filter)(v[n][a].accesses,(e=>{if((0,E.some)(y,e))return e}));(0,E.isEqual)(r.value,o)||r.onChange(o)}return l.createElement("div",{className:"table-editable"},l.createElement(w.A,O({},r,{placement:"auto",type:"checkbox",options:y,showSelectAll:!0,selectAllLabel:"Select All"})))}}))}return"Select Masking Option"==o?"tag"==(null==r?void 0:r.name)?l.createElement("td",{key:o,className:"align-middle"},l.createElement(d.D0,{className:"form-control",name:"".concat(e,".dataMaskInfo"),render:n=>{var r,o,s,u,m,p,f,{input:y}=n;return(null==t||null===(r=t.value[a])||void 0===r||null===(o=r.accesses)||void 0===o||null===(s=o.tableList)||void 0===s?void 0:s.length)>0?l.createElement("div",{className:"table-editable"},l.createElement(w.A,O({},y,{placement:"auto",type:"radio",options:q(a),showSelectAll:!1,selectAllLabel:"Select All",formValues:v,dataMaskIndex:null==t||null===(u=t.value[a])||void 0===u||null===(m=u.accesses)||void 0===m?void 0:m.tableList})),"Custom"==(null==t||null===(p=t.value[a])||void 0===p||null===(f=p.dataMaskInfo)||void 0===f?void 0:f.label)&&l.createElement(l.Fragment,null,l.createElement(d.D0,{className:"form-control",name:"".concat(e,".dataMaskInfo.valueExpr"),validate:Z,render:e=>{var{input:t,meta:a}=e;return l.createElement(l.Fragment,null,l.createElement(i.A.Control,O({type:"text"},t,{placeholder:"Enter masked value or expression..."})),a.error&&l.createElement("span",{className:"invalid-field"},a.error))}}))):l.createElement("div",null,l.createElement("span",{className:"editable-add-text text-secondary"},"Select Masking Option"),l.createElement(c.A,{className:"mg-10 mx-auto btn-mini d-block text-secondary",variant:"outline-dark",size:"sm",type:"button",onClick:()=>(g.oR.dismiss(N.current),g.oR.current=g.oR.warning("Please select access type first to enable add masking options."))},l.createElement("i",{className:"fa-fw fa fa-plus"})))}})):l.createElement("td",{key:o,className:"align-middle"},l.createElement(d.D0,{className:"form-control",name:"".concat(e,".dataMaskInfo"),render:n=>{var r,o,{input:s}=n;return l.createElement("div",{className:"table-editable"},l.createElement(w.A,O({},s,{placement:"auto",type:"radio",options:q(),showSelectAll:!1,selectAllLabel:"Select All"})),"Custom"==(null==t||null===(r=t.value[a])||void 0===r||null===(o=r.dataMaskInfo)||void 0===o?void 0:o.label)&&l.createElement(l.Fragment,null,l.createElement(d.D0,{className:"form-control",name:"".concat(e,".dataMaskInfo.valueExpr"),validate:Z,render:e=>{var{input:t,meta:a}=e;return l.createElement(l.Fragment,null,l.createElement(i.A.Control,O({type:"text"},t,{placeholder:"Enter masked value or expression..."})),a.error&&l.createElement("span",{className:"invalid-field"},a.error))}})))}})):"Row Level Filter"==o?l.createElement("td",{key:o,className:"align-middle"},l.createElement(d.D0,{className:"form-control",name:"".concat(e,".rowFilterInfo"),render:e=>{var{input:t,meta:a}=e;return l.createElement("div",{className:"table-editable"},l.createElement(w.A,O({},t,{placement:"auto",type:"input"})),a.touched&&a.error&&l.createElement("span",null,a.error))}})):"Delegate Admin"==o&&"tag"!==(null==r?void 0:r.name)?l.createElement("td",{key:"".concat(e,"-").concat(a),className:"text-center align-middle"},l.createElement("div",{key:"".concat(e,"-").concat(a)},l.createElement(d.D0,{className:"form-control",name:"".concat(e,".delegateAdmin"),validate:(e,t)=>$(t[n],a),"data-js":"delegatedAdmin","data-cy":"delegatedAdmin",type:"checkbox"},(e=>{var{input:t}=e;return l.createElement("div",null,l.createElement("input",O({},t,{type:"checkbox"})))})))):l.createElement("td",{key:o},o)})),l.createElement("td",{className:"align-middle"},l.createElement(c.A,{variant:"danger",size:"sm",title:"Remove",onClick:()=>t.remove(a),"data-action":"delete","data-cy":"delete"},l.createElement("i",{className:"fa-fw fa fa-remove"}))))))})))))),l.createElement(c.A,{className:"btn btn-mini mt-2",type:"button",onClick:()=>a(n,void 0),"data-action":"addGroup","data-cy":"addGroup",title:"Add"},l.createElement("i",{className:"fa-fw fa fa-plus"})," "))}var j=a(8106),F=a(1100),L=a(1364),Y=a(6005),K=a(9052),G=a.n(K),H=a(4743),z=a.n(H);function V(){return V=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var l in a)Object.prototype.hasOwnProperty.call(a,l)&&(e[l]=a[l])}return e},V.apply(this,arguments)}function _(e){var{addPolicyItem:t}=e,[a,n]=(0,l.useState)(!1),r=e=>l.createElement(l.Fragment,null,l.createElement(F.A,{className:"mb-2"},l.createElement(L.A,V({},e.dateProps,{readOnly:!0})),l.createElement(F.A.Text,{onClick:function(){e.dateProps.onChange({target:{value:""}})},className:"cursor-pointer"}," ","X"," ")));return l.createElement(l.Fragment,null,l.createElement(c.A,{onClick:()=>{n(!0)},variant:"primary",size:"sm",className:"float-end btn-sm","data-js":"policyTimeBtn","data-cy":"policyTimeBtn"},l.createElement("i",{className:"fa fa-clock-o"})," Add Validity Period"),l.createElement(m.A,{show:a,size:"lg",onHide:()=>n((e=>!e)),backdrop:"static"},l.createElement(m.A.Header,{closeButton:!0},l.createElement(m.A.Title,null,"Policy Validity Period")),l.createElement(m.A.Body,null,l.createElement(D.A,{bordered:!0},l.createElement("thead",null,l.createElement("tr",null,l.createElement("th",null,"Start Date"),l.createElement("th",null,"End Date"),l.createElement("th",null,"Time Zone"," ",l.createElement("span",null,l.createElement(b.VO,{placement:"right",content:l.createElement("p",{className:"pd-10",style:{fontSize:"small"}},"Please Select StartDate or EndDate to enable Time Zone"),icon:"fa-fw fa fa-info-circle"}))))),l.createElement("tbody",null,l.createElement(P.ED,{name:"validitySchedules"},(e=>{var{fields:t}=e;return t.map(((e,a)=>l.createElement("tr",{key:e},l.createElement("td",{className:"text-center"},l.createElement(d.D0,{className:"form-control",name:"".concat(e,".startTime"),placeholder:"ï€‡ Username",render:e=>{var{input:n,meta:o}=e;return l.createElement("div",null,l.createElement(G(),V({},n,{renderInput:e=>l.createElement(r,{dateProps:e}),dateFormat:"MM-DD-YYYY",timeFormat:"HH:mm:ss",closeOnSelect:!0,isValidDate:e=>((e,t)=>!e||null==e||!e.endTime||t.isBefore(e.endTime))(t.value[a],e)})),o.touched&&o.error&&l.createElement("span",null,o.error))}})),l.createElement("td",{className:"text-center"},l.createElement(d.D0,{className:"form-control",name:"".concat(e,".endTime"),render:e=>{var{input:n,meta:o}=e;return l.createElement("div",null,l.createElement(G(),V({},n,{renderInput:e=>l.createElement(r,{dateProps:e}),dateFormat:"MM-DD-YYYY",timeFormat:"HH:mm:ss",closeOnSelect:!0,isValidDate:e=>((e,t)=>{if(e&&null!=e&&e.startTime)return t.isAfter(e.startTime);var a=z()().subtract(1,"day");return t.isAfter(a)})(t.value[a],e)})),o.touched&&o.error&&l.createElement("span",null,o.error))}})),l.createElement("td",{className:"text-center"},l.createElement(d.D0,{className:"form-control",name:"".concat(e,".timeZone"),render:e=>{var n,r,o,i,{input:s,meta:c}=e;return l.createElement("div",null,l.createElement(Y.Ay,V({},s,{options:(0,S.N8)(),getOptionLabel:e=>e.text,getOptionValue:e=>e.id,isClearable:!0,isDisabled:!(!(0,E.isEmpty)(null==t||null===(n=t.value)||void 0===n||null===(r=n[a])||void 0===r?void 0:r.startTime)||!(0,E.isEmpty)(null==t||null===(o=t.value)||void 0===o||null===(i=o[a])||void 0===i?void 0:i.endTime)),styles:b.eB})),c.touched&&c.error&&l.createElement("span",null,c.error))}})),l.createElement("td",{className:"text-center"},l.createElement(c.A,{variant:"danger",size:"sm",className:"btn-mini",title:"Remove",onClick:()=>t.remove(a),"data-action":"delete","data-cy":"delete"},l.createElement("i",{className:"fa-fw fa fa-remove"}))))))})))),l.createElement(c.A,{type:"button",className:"btn-mini",onClick:()=>t("validitySchedules",void 0),"data-action":"addTime","data-cy":"addTime"},l.createElement("i",{className:"fa-fw fa fa-plus"}))),l.createElement(m.A.Footer,null,l.createElement(c.A,{variant:"primary",size:"sm",onClick:()=>{n(!1)}},"Close"))))}var B=a(6963),U=a(6696);function q(){return q=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var l in a)Object.prototype.hasOwnProperty.call(a,l)&&(e[l]=a[l])}return e},q.apply(this,arguments)}var Z=a(1206);function $(e){var{policyConditionDetails:t,inputVal:a,showModal:n,handleCloseModal:s}=e,u=[{value:"yes",label:"Yes"},{value:"no",label:"No"}],v=()=>{s(!1)},p=e=>{var t=null;if(e){var a=(0,E.find)(u,{value:e});a&&(t=a)}return t},f=e=>{var t="";if(e)try{Z.parseScript(e)}catch(e){t=e.message}return t};return l.createElement(l.Fragment,null,l.createElement(m.A,{show:n,onHide:v,size:"xl","aria-labelledby":"contained-modal-title-vcenter",centered:!0},l.createElement(d.lV,{onSubmit:e=>{for(var t in e.conditions)null!=e.conditions[t]&&""!=e.conditions[t]||delete e.conditions[t];a.onChange(e.conditions),v()},initialValues:()=>{var e={};if(a&&a.value)for(var t in a.value)e[t]=a.value[t];return{conditions:e}},render:e=>{var{handleSubmit:a}=e;return l.createElement("form",{onSubmit:a},l.createElement(m.A.Header,{closeButton:!0},l.createElement(m.A.Title,null,"Policy Condition")),l.createElement(m.A.Body,null,(null==t?void 0:t.length)>0&&t.map((e=>{var t=null!=e.uiHint&&""!=e.uiHint?JSON.parse(e.uiHint):"";if(""!=t){if(null!=t&&t.singleValue)return l.createElement("div",{key:e.name},l.createElement(i.A.Group,{className:"mb-3"},l.createElement("b",null,e.label,":"),l.createElement(d.D0,{className:"form-control",name:"conditions.".concat(e.name),render:e=>{var{input:t}=e;return l.createElement(Y.Ay,q({},t,{options:u,isClearable:!0,value:p(t.value),onChange:e=>((e,t)=>{var a=null;e&&e.value&&(a=e.value),t.onChange(a)})(e,t)}))}})));if(null!=t&&t.isMultiline)return l.createElement("div",{key:e.name},l.createElement(i.A.Group,{className:"mb-3"},l.createElement(r.A,null,l.createElement(o.A,null,l.createElement("b",null,e.label,":"),l.createElement(S.mo,{position:"right",message:l.createElement("p",{className:"pd-10"},U.Nz.MESSAGE.policyConditionInfoIcon)}))),l.createElement(r.A,null,l.createElement(o.A,null,l.createElement(d.D0,{name:"conditions.".concat(e.name),validate:f,render:e=>{var{input:t,meta:a}=e;return l.createElement(l.Fragment,null,l.createElement(i.A.Control,q({},t,{className:a.error?"form-control border border-danger":"form-control",as:"textarea",rows:3})),a.error&&l.createElement("span",{className:"invalid-field"},a.error))}})))));if(null!=t&&t.isMultiValue)return l.createElement("div",{key:e.name},l.createElement(i.A.Group,{className:"mb-3"},l.createElement("b",null,e.label,":"),l.createElement(d.D0,{className:"form-control",name:"conditions.".concat(e.name),render:e=>{var t,a,{input:n}=e;return l.createElement(B.A,q({},n,{isMulti:!0,isClearable:!0,placeholder:"",width:"500px",value:(t=n.value,a=[],(0,E.isEmpty)(t)||(a=t.map((e=>({label:e,value:e})))),a),onChange:e=>((e,t)=>{var a=[];e&&(a=e.map((e=>e.value))),t.onChange(a)})(e,n),styles:b.eB}))}})))}}))),l.createElement(m.A.Footer,null,l.createElement(c.A,{variant:"secondary",size:"sm",onClick:v},"Close"),l.createElement(c.A,{title:"Save",size:"sm",type:"submit"},"Save")))}})))}var J=a(5093),W=a.n(J),X=a(7385),Q=a(3850),ee=a(1659),te=a(4283);function ae(){return ae=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var l in a)Object.prototype.hasOwnProperty.call(a,l)&&(e[l]=a[l])}return e},ae.apply(this,arguments)}function le(e,t,a,l,n,r,o){try{var i=e[r](o),s=i.value}catch(e){return void a(e)}i.done?t(s):Promise.resolve(s).then(l,n)}function ne(e){return function(){var t=this,a=arguments;return new Promise((function(l,n){var r=e.apply(t,a);function o(e){le(r,l,n,o,i,"next",e)}function i(e){le(r,l,n,o,i,"throw",e)}o(void 0)}))}}function re(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);t&&(l=l.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,l)}return a}function oe(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?re(Object(a),!0).forEach((function(t){ie(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):re(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function ie(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var se={label:"None",value:"none"},ce=!0,ue={loader:!0,serviceDetails:null,serviceCompDetails:null,policyData:null,formData:{}},me=e=>{var{isDirtyField:t,isUnblock:a}=e;return(0,ee.A)("Are you sure you want to leave",t&&!a),null};function de(e,t){if("SET_DATA"===t.type)return oe(oe({},e),{},{loader:!1,serviceDetails:t.serviceDetails,serviceCompDetails:t.serviceCompDetails,policyData:null==t?void 0:t.policyData,formData:t.formData});throw new Error}var ve=e=>{var{when:t,is:a,children:n}=e;return l.createElement(d.D0,{name:t,subscription:{value:!0}},(e=>{var{input:{value:t}}=e;return t===a?n:null}))};function pe(){var{serviceId:e,policyType:t,policyId:a}=(0,j.g)(),p=(0,j.Zp)(),{state:D}=(0,j.zy)(),x=(0,E.cloneDeep)((0,te.Ji)()),[w,k]=(0,l.useReducer)(de,ue),{loader:O,serviceDetails:C,serviceCompDetails:I,policyData:R,formData:T}=w,[F,L]=(0,l.useState)([]),[Y,K]=(0,l.useState)(!1),[G,H]=(0,l.useState)(!1),[z,V]=(0,l.useState)(!0),[B,q]=(0,l.useState)(!0),[Z,J]=(0,l.useState)(!1),[ee,le]=(0,l.useState)(!1),re=l.useRef(null),[ie,pe]=(0,l.useState)(!1);(0,l.useEffect)((()=>{Ae()}),[e,t,a]);var fe,ye=()=>{J(!1)},Ee=(e,t,a,l)=>{var n=!1;if(!(0,E.isEmpty)(e))for(var r in e)if(n=null==t?void 0:t[r],null!=a&&a.validitySchedules||null!=t&&t.validitySchedules||null!=a&&a.conditions||null!=t&&t.conditions||1==n){n=!0;break}return(0,E.isEqual)(null==a?void 0:a.validitySchedules,null==l?void 0:l.validitySchedules)&&(0,E.isEqual)(null==a?void 0:a.conditions,null==l?void 0:l.conditions)||(n=!0),n},ge=function(){var e=ne((function*(e){var t={name:e||"",isVisible:1};return(yield(0,h.fetchApi)({url:"xusers/lookup/users",params:t})).data.vXStrings.map((e=>({label:e.value,value:e.value})))}));return function(t){return e.apply(this,arguments)}}(),be=function(){var e=ne((function*(e){var t={name:e||"",isVisible:1};return(yield(0,h.fetchApi)({url:"xusers/lookup/groups",params:t})).data.vXStrings.map((e=>({label:e.value,value:e.value})))}));return function(t){return e.apply(this,arguments)}}(),he=function(){var e=ne((function*(e){var t={roleNamePartial:e||""};return(yield(0,h.fetchApi)({url:"roles/roles",params:t})).data.roles.map((e=>({label:e.name,value:e.name})))}));return function(t){return e.apply(this,arguments)}}(),Ae=function(){var e=ne((function*(){var e,l=yield Ne(),n=null==x||null===(e=x.allServiceDefs)||void 0===e?void 0:e.find((e=>e.name==l.type));if(n){var r=0;null!=n&&n.dataMaskDef&&0!=Object.keys(n.dataMaskDef).length&&r++,null!=n&&n.rowFilterDef&&0!=Object.keys(n.rowFilterDef).length&&r++,+t>r&&p("/pageNotFound")}var o=null;a&&(o=yield De()),k({type:"SET_DATA",serviceDetails:l,serviceCompDetails:n,policyData:o||null,formData:xe(o,n)})}));return function(){return e.apply(this,arguments)}}(),Ne=function(){var t=ne((function*(){var t=null;try{t=(yield(0,h.fetchApi)({url:"plugins/services/".concat(e)})).data||null}catch(e){console.error("Error occurred while fetching policy details ! ".concat(e))}return t}));return function(){return t.apply(this,arguments)}}(),De=function(){var e=ne((function*(){var e=null;try{e=(yield(0,h.fetchApi)({url:"plugins/policies/".concat(a)})).data||null}catch(e){console.error("Error occurred while fetching service details ! ".concat(e))}return e}));return function(){return e.apply(this,arguments)}}(),Pe=function(){var e=ne((function*(e){var t={};return e&&(t.policyLabel=e||""),(yield(0,h.fetchApi)({url:"plugins/policyLabels",params:t})).data.map((e=>({label:e,value:e})))}));return function(t){return e.apply(this,arguments)}}(),xe=(e,l)=>{var n,r,o,i,s,c,u,m,d,v={};v.policyType=a?null==e?void 0:e.policyType:t,v.policyItems=a&&(null==e||null===(n=e.policyItems)||void 0===n?void 0:n.length)>0?ke(null==e?void 0:e.policyItems,null==l?void 0:l.accessTypes,null,null==l?void 0:l.name,l):[{}],v.allowExceptions=a&&(null==e||null===(r=e.allowExceptions)||void 0===r?void 0:r.length)>0?ke(null==e?void 0:e.allowExceptions,null==l?void 0:l.accessTypes,null,null==l?void 0:l.name,l):[{}],v.denyPolicyItems=a&&(null==e||null===(o=e.denyPolicyItems)||void 0===o?void 0:o.length)>0?ke(null==e?void 0:e.denyPolicyItems,null==l?void 0:l.accessTypes,null,null==l?void 0:l.name,l):[{}],v.denyExceptions=a&&(null==e||null===(i=e.denyExceptions)||void 0===i?void 0:i.length)>0?ke(e.denyExceptions,null==l?void 0:l.accessTypes,null,null==l?void 0:l.name,l):[{}],v.dataMaskPolicyItems=a&&(null==e||null===(s=e.dataMaskPolicyItems)||void 0===s?void 0:s.length)>0?ke(e.dataMaskPolicyItems,null==l||null===(c=l.dataMaskDef)||void 0===c?void 0:c.accessTypes,null==l||null===(u=l.dataMaskDef)||void 0===u?void 0:u.maskTypes,null==l?void 0:l.name,l):[{}],v.rowFilterPolicyItems=a&&(null==e||null===(m=e.rowFilterPolicyItems)||void 0===m?void 0:m.length)>0?ke(e.rowFilterPolicyItems,null==l||null===(d=l.rowFilterDef)||void 0===d?void 0:d.accessTypes,null,null==l?void 0:l.name,l):[{}];var p=(0,S._b)(l,v.policyType);if(p&&(0,E.forEach)(p,(e=>{e.accessTypeRestrictions&&e.accessTypeRestrictions.length>0&&pe(!0)})),a){var f,y;if(v.policyName=null==e?void 0:e.name,v.isEnabled=null==e?void 0:e.isEnabled,v.policyPriority=0!=(null==e?void 0:e.policyPriority),v.description=null==e?void 0:e.description,v.isAuditEnabled=null==e?void 0:e.isAuditEnabled,v.policyLabel=e&&(null==e||null===(f=e.policyLabels)||void 0===f?void 0:f.map((e=>({label:e,value:e})))),null!=e&&e.resources)if(ce)(e.additionalResources||e.resources)&&(e.additionalResources=[e.resources,...e.additionalResources||[]],v.additionalResources=[],(0,E.map)(e.additionalResources,(function(e){var t=[],a={};Object.entries(e).map((e=>{var[l,n]=e,r=(0,E.find)(p,["name",l]);a["resourceName-".concat(null==r?void 0:r.level)]=r,a["value-".concat(null==r?void 0:r.level)]=n.values.map((e=>({label:e,value:e}))),null!=r&&r.excludesSupported&&(a["isExcludesSupport-".concat(null==r?void 0:r.level)]=0==n.isExcludes),null!=r&&r.recursiveSupported&&(a["isRecursiveSupport-".concat(null==r?void 0:r.level)]=null==n?void 0:n.isRecursive),t.push({level:r.level,name:r.name})})),t=(0,E.maxBy)(t,"level");var l=(0,E.find)(p,["parent",t.name]);l&&null!=l&&l.isValidLeaf&&(a["resourceName-".concat(l.level)]={label:"None",value:"none"}),v.additionalResources.push(a)})));else{var g=[];Object.entries(null==e?void 0:e.resources).map((e=>{var[t,a]=e,l=(0,E.find)(p,["name",t]);v["resourceName-".concat(null==l?void 0:l.level)]=l,v["value-".concat(null==l?void 0:l.level)]=a.values.map((e=>({label:e,value:e}))),null!=l&&l.excludesSupported&&(v["isExcludesSupport-".concat(null==l?void 0:l.level)]=0==a.isExcludes),null!=l&&l.recursiveSupported&&(v["isRecursiveSupport-".concat(null==l?void 0:l.level)]=null==a?void 0:a.isRecursive),g.push({level:l.level,name:l.name})})),g=(0,E.maxBy)(g,"level");var b=(0,E.find)(p,["parent",g.name]);b&&null!=b&&b.isValidLeaf&&(v["resourceName-".concat(b.level)]={label:"None",value:"none"})}if(null!=e&&e.validitySchedules&&(v.validitySchedules=[],null==e||e.validitySchedules.filter((e=>{var t={};e.endTime&&(t.endTime=W()(e.endTime,"YYYY/MM/DD HH:mm:ss")),e.startTime&&(t.startTime=W()(e.startTime,"YYYY/MM/DD HH:mm:ss")),e.timeZone&&(t.timeZone=(0,S.N8)().find((t=>t.id==e.timeZone))),v.validitySchedules.push(t)}))),(null==e||null===(y=e.conditions)||void 0===y?void 0:y.length)>0){v.conditions={};var h=function(e){var t=(0,E.find)((0,S.F4)(null==l?void 0:l.policyConditions),(function(t){if(t.name==e.type)return t}));(0,E.isEmpty)(t.uiHint)||(v.conditions[null==e?void 0:e.type]=JSON.parse(t.uiHint).isMultiValue?null==e?void 0:e.values:null==e?void 0:e.values.toString())};for(var A of e.conditions)h(A)}}return ce&&(0,E.isUndefined)(v.additionalResources)&&(v.additionalResources=[{}]),v.isDenyAllElse=(null==e?void 0:e.isDenyAllElse)||!1,v},we=(e,t)=>{var a=[];for(var l of e[t])!(0,E.isEmpty)(l)&&Object.entries(l).length>0&&function(e,t,n,r,o){var i,s={};if("undefined"!=l.delegateAdmin&&null!=l.delegateAdmin&&(s.delegateAdmin=l.delegateAdmin),(null==l||null===(e=l.accesses)||void 0===e?void 0:e.length)>0&&"tag"!==I.name)s.accesses=l.accesses.map((e=>{var{value:t}=e;return{type:t,isAllowed:!0}}));else if((null==l||null===(t=l.accesses)||void 0===t||null===(n=t.tableList)||void 0===n?void 0:n.length)>0&&"tag"==I.name){var c=[];for(var u in l.accesses.tableList)c=[...c,...l.accesses.tableList[u].permission];s.accesses=c.map((e=>({type:e,isAllowed:!0})))}l.users&&l.users.length>0&&(s.users=l.users.map((e=>{var{value:t}=e;return t}))),l.groups&&l.groups.length>0&&(s.groups=l.groups.map((e=>{var{value:t}=e;return t}))),l.roles&&l.roles.length>0&&(s.roles=l.roles.map((e=>{var{value:t}=e;return t}))),"undefined"!=l.rowFilterInfo&&null!=l.rowFilterInfo&&(s.rowFilterInfo={},s.rowFilterInfo.filterExpr=l.rowFilterInfo),"undefined"!=l.dataMaskInfo&&null!=l.dataMaskInfo&&(s.dataMaskInfo={},s.dataMaskInfo.dataMaskType=l.dataMaskInfo.value,null!=l&&null!==(i=l.dataMaskInfo)&&void 0!==i&&i.valueExpr&&(s.dataMaskInfo.valueExpr=l.dataMaskInfo.valueExpr)),null!=l&&l.conditions&&(s.conditions=[],Object.entries(l.conditions).map((e=>{var[t,a]=e;return s.conditions.push({type:t,values:(0,E.isArray)(a)?a.map((e=>e.value)):[a]})}))),!(0,E.isEmpty)(s)&&!(0,E.isEmpty)(null==s?void 0:s.delegateAdmin)&&(null===(r=Object.keys(s))||void 0===r?void 0:r.length)>1&&a.push(s),!(0,E.isEmpty)(s)&&(0,E.isEmpty)(null==s?void 0:s.delegateAdmin)&&(null===(o=Object.keys(s))||void 0===o?void 0:o.length)>1&&a.push(s)}();return a},ke=(e,t,a,l,n)=>e.map((e=>{var r,o,i,s,c,u,m={},d=[];if((0,E.has)(e,"delegateAdmin")&&(m.delegateAdmin=e.delegateAdmin),"tag"==l){for(var v=function(a){t.map((t=>{e.accesses[a].type==t.name&&d.push(t.name)}))},p=0;e.accesses.length>p;p++)v(p);var f=[],y=(0,E.groupBy)(d,(function(e){var t=e;return t.substr(0,t.indexOf(":"))}));for(var g in y)f.push({serviceName:g,permission:y[g]});m.accesses={tableList:f}}else{for(var b=function(a){t.map((t=>{e.accesses[a].type==t.name&&d.push({label:t.label,value:t.name})}))},h=0;(null==e||null===(A=e.accesses)||void 0===A?void 0:A.length)>h;h++){var A;b(h)}m.accesses=d}if((null==e||null===(r=e.groups)||void 0===r?void 0:r.length)>0&&(m.groups=e.groups.map((e=>({label:e,value:e})))),(null==e||null===(o=e.users)||void 0===o?void 0:o.length)>0&&(m.users=e.users.map((e=>({label:e,value:e})))),(null==e||null===(i=e.roles)||void 0===i?void 0:i.length)>0&&(m.roles=e.roles.map((e=>({label:e,value:e})))),null!=e&&null!==(s=e.rowFilterInfo)&&void 0!==s&&s.filterExpr&&(m.rowFilterInfo=e.rowFilterInfo.filterExpr),null!=e&&null!==(c=e.dataMaskInfo)&&void 0!==c&&c.dataMaskType){var N;m.dataMaskInfo={};var D=a.find((t=>t.name==e.dataMaskInfo.dataMaskType));m.dataMaskInfo.label=D.label,m.dataMaskInfo.value=D.name,null!=e&&null!==(N=e.dataMaskInfo)&&void 0!==N&&N.valueExpr&&(m.dataMaskInfo.valueExpr=e.dataMaskInfo.valueExpr)}if((null==e||null===(u=e.conditions)||void 0===u?void 0:u.length)>0){m.conditions={};var P=function(e){var t=(0,E.find)((0,S.F4)(null==n?void 0:n.policyConditions),(function(t){if(t.name==e.type)return t}));(0,E.isEmpty)(t.uiHint)||(m.conditions[null==e?void 0:e.type]=JSON.parse(t.uiHint).isMultiValue?null==e?void 0:e.values.map((e=>({value:e,label:e}))):null==e?void 0:e.values.toString())};for(var x of e.conditions)P(x)}return m})),Se=function(){var l=ne((function*(l){var n,r,o,i,s,c,u={};u.allowExceptions=we(l,"allowExceptions"),u.policyItems=we(l,"policyItems"),null!=l&&l.isDenyAllElse?(u.denyPolicyItems=[],u.denyExceptions=[]):(u.denyPolicyItems=we(l,"denyPolicyItems"),u.denyExceptions=we(l,"denyExceptions")),u.dataMaskPolicyItems=we(l,"dataMaskPolicyItems"),u.rowFilterPolicyItems=we(l,"rowFilterPolicyItems"),u.description=null!==(n=l.description)&&void 0!==n?n:"",u.isAuditEnabled=null===(r=l.isAuditEnabled)||void 0===r||r,u.isDenyAllElse=l.isDenyAllElse,u.isEnabled=null===(o=l.isEnabled)||void 0===o||o,u.name=l.policyName,u.policyLabels=null===(i=l.policyLabel||[])||void 0===i?void 0:i.map((e=>{var{value:t}=e;return t})),u.policyPriority=l.policyPriority?"1":"0",u.policyType=l.policyType,u.service=C.name,null!=l.policyType&&(c=(0,S._b)(I,l.policyType));var m=(0,E.groupBy)(c||[],"level"),d=[];for(var v in m)d.push(+v);if(d=d.sort(),u.resources={},ce)u.additionalResources=[],(0,E.map)(l.additionalResources,(e=>{var t={},a=function(a){if(e["resourceName-".concat(a)]&&e["resourceName-".concat(a)].value!==se.value&&e["value-".concat(a)]&&!(0,E.isEmpty)(e["value-".concat(a)])){var l,n=c.find((function(t){if(t.name==e["resourceName-".concat(a)].name)return t}));t[e["resourceName-".concat(a)].name]={values:(0,E.isArray)(e["value-".concat(a)])?null===(l=e["value-".concat(a)])||void 0===l?void 0:l.map((e=>{var{value:t}=e;return t})):[e["value-".concat(a)].value]},null!=n&&n.excludesSupported&&(t[e["resourceName-".concat(a)].name].isExcludes=n.excludesSupported&&0==e["isExcludesSupport-".concat(a)]),null!=n&&n.recursiveSupported&&(t[e["resourceName-".concat(a)].name].isRecursive=n.recursiveSupported&&!(!1===e["isRecursiveSupport-".concat(a)]))}};for(var l of d)a(l);u.additionalResources.push(t)}));else{var f=function(e){if(l["resourceName-".concat(e)]&&l["resourceName-".concat(e)].value!==se.value&&l["value-".concat(e)]&&!(0,E.isEmpty)(l["value-".concat(e)])){var t,a=c.find((function(t){if(t.name==l["resourceName-".concat(e)].name)return t}));u.resources[l["resourceName-".concat(e)].name]={values:(0,E.isArray)(l["value-".concat(e)])?null===(t=l["value-".concat(e)])||void 0===t?void 0:t.map((e=>{var{value:t}=e;return t})):[l["value-".concat(e)].value]},null!=a&&a.excludesSupported&&(u.resources[l["resourceName-".concat(e)].name].isExcludes=a.excludesSupported&&0==l["isExcludesSupport-".concat(e)]),null!=a&&a.recursiveSupported&&(u.resources[l["resourceName-".concat(e)].name].isRecursive=a.recursiveSupported&&!(!1===l["isRecursiveSupport-".concat(e)]))}};for(var y of d)f(y)}if((null==u||null===(s=u.additionalResources)||void 0===s?void 0:s.length)>0&&(u.additionalResources=(0,E.reject)(u.additionalResources,E.isEmpty),u.resources=u.additionalResources[0],u.additionalResources.shift()),(0,E.isEmpty)(u.resources)&&(delete u.resources,a&&delete R.resources),null!=l&&l.validitySchedules&&(u.validitySchedules=[],l.validitySchedules.filter((e=>{if(e){var t={};e.startTime&&(t.startTime=W()(e.startTime).format("YYYY/MM/DD HH:mm:ss")),e.endTime&&(t.endTime=W()(e.endTime).format("YYYY/MM/DD HH:mm:ss")),e.timeZone&&(t.timeZone=e.timeZone.id),(0,E.isEmpty)(t)||u.validitySchedules.push(t)}}))),null!=l&&l.conditions?(u.conditions=[],Object.entries(l.conditions).map((e=>{var[t,a]=e;return u.conditions.push({type:t,values:(0,E.isArray)(a)?a:[a]})}))):u.conditions=[],null!=localStorage.getItem("zoneDetails")&&(u.zoneName=JSON.parse(localStorage.getItem("zoneDetails")).label),H(!0),a){var b=oe(oe({},R),u);try{le(!0),yield(0,h.fetchApi)({url:"plugins/policies/".concat(a),method:"PUT",data:b}),le(!1),g.oR.dismiss(re.current),re.current=g.oR.success("Policy updated successfully!!"),p("/service/".concat(e,"/policies/").concat(R.policyType))}catch(e){var A,N;le(!1);var P="Failed to save policy form";null!=e&&null!==(A=e.response)&&void 0!==A&&null!==(N=A.data)&&void 0!==N&&N.msgDesc&&(P="Error! ".concat(e.response.data.msgDesc)),g.oR.error(P),console.error("Error while saving policy form! ".concat(e))}}else try{le(!0),yield(0,h.fetchApi)({url:"plugins/policies",method:"POST",data:u});var x={};D&&null!=D&&(x=D.tblpageData,D.tblpageData.pageRecords%D.tblpageData.pageSize==0?x.totalPage=D.tblpageData.totalPage+1:void 0!==x&&(x.totalPage=D.tblpageData.totalPage)),le(!1),g.oR.dismiss(re.current),re.current=g.oR.success("Policy save successfully!!"),p("/service/".concat(e,"/policies/").concat(t),{state:{showLastPage:!0,addPageData:x}})}catch(e){var w,k;le(!1);var O="Failed to save policy form";null!=e&&null!==(w=e.response)&&void 0!==w&&null!==(k=w.data)&&void 0!==k&&k.msgDesc&&(O="Error! ".concat(e.response.data.msgDesc)),g.oR.error(O),console.error("Error while saving policy form! ".concat(e))}}));return function(e){return l.apply(this,arguments)}}(),Oe=function(){var e=ne((function*(e,t){ye();var l=a?R.policyType:l;try{le(!0),yield(0,h.fetchApi)({url:"plugins/policies/".concat(e),method:"DELETE"}),H(!0),le(!1),g.oR.dismiss(re.current),re.current=g.oR.success(" Success! Policy deleted successfully"),p("/service/".concat(t,"/policies/").concat(l))}catch(e){var n,r;le(!1);var o="Error occurred during deleting policy";null!=e&&null!==(n=e.response)&&void 0!==n&&null!==(r=n.data)&&void 0!==r&&r.msgDesc&&(o="Error! ".concat(e.response.data.msgDesc)),g.oR.error(o),console.error(e)}}));return function(t,a){return e.apply(this,arguments)}}(),Ce=e=>{var{children:t,eventKey:a,callback:n}=e,r=(0,l.useContext)(Q.A),o=(0,X.M)(a,(()=>n&&n(a))),i=(null==r?void 0:r.activeEventKey)===a;return l.createElement("a",{className:"float-end text-decoration-none",role:"button",onClick:o},i?l.createElement("span",{className:"wrap-collapse text-decoration-none"},"hide ",l.createElement("i",{className:"fa-fw fa fa-caret-up"})):l.createElement("span",{className:"wrap-expand"},"show ",l.createElement("i",{className:"fa-fw fa fa-caret-down"})))},Ie=e=>{var t,a,l,n;return null==e||e.find((e=>{if(void 0!==e)return n=e})),void 0!==n&&null!==(t=n)&&void 0!==t&&t.accesses?g.oR.error(null===(a=n)||void 0===a?void 0:a.accesses,{toastId:"error1"}):g.oR.error(null===(l=n)||void 0===l?void 0:l.delegateAdmin,{toastId:"error1"})},Re=(e,t)=>{var a=(0,S._b)(I,t.policyType),l=(0,E.groupBy)(a||[],"level"),n=[];for(var r in l)n.push(+r);for(var o of n=n.sort()){var i;if(ce){if((null==e||null===(i=e.additionalResources)||void 0===i?void 0:i.length)>0)return!0}else if(void 0!==e["value-".concat(o)])return!0}};return l.createElement(l.Fragment,null,O?l.createElement(b.aH,null):l.createElement("div",null,l.createElement("div",{className:"header-wraper"},l.createElement("h3",{className:"wrap-header bold"},"".concat(a?"Edit":"Create"," Policy")),((fe={}).serviceId=e,fe.policyType=a?null==R?void 0:R.policyType:t,fe.serviceName=null==C?void 0:C.displayName,fe.selectedZone=JSON.parse(localStorage.getItem("zoneDetails")),"tag"===(null==I?void 0:I.name)?null!=fe&&fe.selectedZone?(0,S.zH)(["TagBasedServiceManager","ManagePolicies",a?"PolicyEdit":"PolicyCreate"],fe):(0,S.zH)(["TagBasedServiceManager","ManagePolicies",a?"PolicyEdit":"PolicyCreate"],(0,E.pick)(fe,["serviceId","policyType","serviceName"])):null!=fe&&fe.selectedZone?(0,S.zH)(["ServiceManager","ManagePolicies",a?"PolicyEdit":"PolicyCreate"],fe):(0,S.zH)(["ServiceManager","ManagePolicies",a?"PolicyEdit":"PolicyCreate"],(0,E.pick)(fe,["serviceId","policyType","serviceName"])))),l.createElement("div",{className:"wrap"},l.createElement(d.lV,{onSubmit:Se,mutators:oe({},y.A),initialValues:T,validate:e=>{var t={};return e.policyName||(t.policyName={required:!0,text:"Required"}),t},render:y=>{var g,h,D,{handleSubmit:x,values:w,invalid:k,errors:O,dirty:T,form:{mutators:{push:j}},dirtyFields:H,modified:W,initialValues:X}=y;return l.createElement(l.Fragment,null,l.createElement(me,{isDirtyField:(1==T||!(0,E.isEqual)(X,w))&&Ee(H,W,w,X),isUnblock:G}),l.createElement("form",{onSubmit:e=>{k&&(0,E.forIn)(O,(function(e,t){if((0,E.has)(O,"policyName")||Re(O,w)){var a=document.getElementById("isError")||document.getElementById(t)||document.querySelector("input[name=".concat(t,"]"))||document.querySelector("input[id=".concat(t,"]"))||document.querySelector('span[className="invalid-field"]');(0,b.Nc)(a)}else Ie(null==O?void 0:O[t])})),x(e)}},(w.policyType==A.Kp.RANGER_MASKING_POLICY_TYPE.value||w.policyType==A.Kp.RANGER_ROW_FILTER_POLICY_TYPE.value)&&z&&l.createElement(n.A,{variant:"warning",onClose:()=>V(!1),dismissible:!0,"data-js":"policyInfoAlert","data-cy":"policyInfoAlert"},l.createElement("i",{className:"fa-fw fa fa-info-circle d-inline text-dark"}),(0,S.bq)(w.policyType,I.name)),a&&!(0,E.isEmpty)(R.validitySchedules)&&(0,S.OE)(R)&&B&&l.createElement(n.A,{variant:"danger",onClose:()=>q(!1),dismissible:!0},l.createElement("i",{className:"fa fa-clock-o fa-fw  fa-lg time-clock"}),l.createElement("p",{className:"pd-l-6 d-inline"}," Policy Expired")),l.createElement("fieldset",null,l.createElement("p",{className:"formHeader"},"Policy Details : ")),l.createElement(r.A,{className:"user-role-grp-form"},l.createElement(o.A,{md:8},l.createElement(i.A.Group,{as:r.A,className:"mb-3"},l.createElement(d.D0,{className:"form-control",name:"policyType",render:e=>{var t,{input:a}=e;return l.createElement(l.Fragment,null,l.createElement(i.A.Label,{column:!0,sm:3},l.createElement("span",{className:"float-end fnt-14"},"Policy Type")),l.createElement(o.A,{sm:5},l.createElement("h6",{className:"d-inline me-1"},l.createElement(s.A,{bg:"primary",style:{verticalAlign:"sub"}},null===(t=(0,A.uK)(A.Kp,+a.value))||void 0===t?void 0:t.label))))}})),a&&l.createElement(i.A.Group,{as:r.A,className:"mb-3"},l.createElement(i.A.Label,{column:!0,sm:3},l.createElement("span",{className:"float-end fnt-14"},"Policy ID*")),l.createElement(o.A,{sm:5},l.createElement("h6",{className:"d-inline me-1"},l.createElement("span",{style:{verticalAlign:"sub"}},l.createElement(s.A,{bg:"primary"},R.id))))),l.createElement(i.A.Group,{as:r.A,className:"mb-3"},l.createElement(d.D0,{className:"form-control",name:"policyName",render:e=>{var{input:t,meta:a}=e;return l.createElement(l.Fragment,null,l.createElement(i.A.Label,{column:!0,sm:3},l.createElement("span",{className:"float-end fnt-14"},"Policy Name*")),l.createElement(l.Fragment,null,l.createElement(o.A,{sm:5,className:"position-relative"},l.createElement(i.A.Control,ae({},t,{placeholder:"Policy Name",id:a.error&&a.touched?"isError":"name",className:a.error&&a.touched?"form-control border-danger":"form-control","data-cy":"policyName"})),l.createElement(S.mo,{css:"input-box-info-icon",position:"right",message:l.createElement("p",{className:"pd-10",style:{fontSize:"small"}},U.Nz.MESSAGE.policyNameInfoIconMessage)}),a.touched&&a.error&&l.createElement("span",{className:"invalid-field"},a.error.text))))}}),l.createElement(o.A,{sm:4},l.createElement(r.A,null,l.createElement(o.A,{sm:5},l.createElement(d.D0,{className:"form-control",name:"isEnabled",render:e=>{var{input:t}=e;return l.createElement(f(),ae({},t,{className:"abcd",checked:!(!1===t.value),onlabel:"Enabled",onstyle:"primary",offlabel:"Disabled",offstyle:"outline-secondary",style:"w-100",size:"xs",key:"isEnabled"}))}})),l.createElement(o.A,{sm:5},l.createElement(d.D0,{className:"form-control",name:"policyPriority",render:e=>{var{input:t}=e;return l.createElement(f(),ae({},t,{checked:t.value,onlabel:"Override",onstyle:"primary",offlabel:"Normal",offstyle:"outline-secondary",style:"w-100",size:"xs",key:"policyPriority"}))}}))))),l.createElement(d.D0,{className:"form-control",name:"policyLabel",render:e=>{var{input:t}=e;return l.createElement(i.A.Group,{as:r.A,className:"mb-3"},l.createElement(i.A.Label,{column:!0,sm:3},l.createElement("span",{className:"float-end fnt-14"},"Policy Label")),l.createElement(o.A,{sm:5},l.createElement(v.A,ae({},t,{isMulti:!0,loadOptions:Pe,onFocus:()=>{Pe().then((e=>{L(e)}))},defaultOptions:F,styles:b.eB}))))}}),!ce&&l.createElement(N.A,{serviceDetails:C,serviceCompDetails:I,formValues:w,policyType:a?R.policyType:t,policyId:a}),l.createElement(d.D0,{className:"form-control",name:"description",render:e=>{var{input:t}=e;return l.createElement(i.A.Group,{as:r.A,className:"mb-3"},l.createElement(i.A.Label,{column:!0,sm:3},l.createElement("span",{className:"float-end fnt-14"},"Description")),l.createElement(o.A,{sm:5},l.createElement(i.A.Control,ae({},t,{as:"textarea",rows:3,"data-cy":"description"}))))}}),l.createElement(d.D0,{className:"form-control",name:"isAuditEnabled",render:e=>{var{input:t}=e;return l.createElement(i.A.Group,{as:r.A,className:"mb-3"},l.createElement(i.A.Label,{column:!0,sm:3},l.createElement("span",{className:"float-end fnt-14"},"Audit Logging*")),l.createElement(o.A,{sm:5},l.createElement("span",{style:{verticalAlign:"sub"}},l.createElement(f(),ae({},t,{checked:!(!1===t.value),onlabel:"Yes",onstyle:"primary",offlabel:"No",offstyle:"outline-secondary",size:"xs",key:"isAuditEnabled"})))))}})),l.createElement(o.A,{md:4},l.createElement("div",{className:"mb-4"},l.createElement(_,{addPolicyItem:j})),l.createElement("br",null),(null==I||null===(g=I.policyConditions)||void 0===g?void 0:g.length)>0&&l.createElement("div",{className:"table-responsive"},l.createElement("table",{className:"table table-bordered condition-group-table"},l.createElement("thead",null,l.createElement("tr",null,l.createElement("th",{colSpan:"2"},"Policy Conditions :",Y&&l.createElement(d.D0,{className:"form-control",name:"conditions",render:e=>{var{input:t}=e;return l.createElement($,{policyConditionDetails:(0,S.F4)(I.policyConditions),inputVal:t,showModal:Y,handleCloseModal:K})}}),l.createElement(c.A,{className:"float-end btn btn-mini",onClick:()=>{K(!0)},"data-js":"customPolicyConditions","data-cy":"customPolicyConditions"},l.createElement("i",{className:"fa-fw fa fa-plus"}))))),l.createElement("tbody",{"data-id":"conditionData"},l.createElement(l.Fragment,null,null!=w&&w.conditions&&!(0,E.isEmpty)(w.conditions)?Object.keys(w.conditions).map((e=>{if(""!=w.conditions[e]&&null!=w.conditions[e]){var t=(0,E.find)(null==I?void 0:I.policyConditions,(function(t){if(t.name==e)return t}));return l.createElement("tr",{key:e},l.createElement("td",null,l.createElement("center",null,t.label)),l.createElement("td",null,(0,E.isArray)(null==w?void 0:w.conditions[e])?l.createElement("center",null,w.conditions[e].join(", ")):l.createElement("center",null,w.conditions[e])))}})):l.createElement("tr",null,l.createElement("td",null,l.createElement("center",null," No Conditions "))))))))),ce&&l.createElement(l.Fragment,null,l.createElement("fieldset",null,l.createElement("p",{className:"formHeader"},"Resources :")),l.createElement(l.Fragment,null,l.createElement(P.ED,{name:"additionalResources"},(e=>{var{fields:n}=e;return n.map(((e,i)=>l.createElement(r.A,{className:"resource-block",key:"".concat(e,"-").concat(i)},l.createElement(o.A,{md:8},l.createElement(N.A,{serviceDetails:C,serviceCompDetails:I,formValues:w.additionalResources[i],policyType:a?R.policyType:t,name:e,isMultiResources:ce})),w.additionalResources.length>1&&l.createElement(o.A,{md:4},l.createElement(c.A,{variant:"danger",size:"sm",title:"Remove",onClick:()=>n.remove(i),"data-action":"delete","data-cy":"delete"},l.createElement("i",{className:"fa-fw fa fa-remove"}))))))})),l.createElement("div",{className:"wrap"},l.createElement(c.A,{type:"button",className:"btn-mini",onClick:()=>j("additionalResources",{}),"data-action":"addTime","data-cy":"addTime"},l.createElement("i",{className:"fa-fw fa fa-plus"})," Add Resource")))),0==w.policyType?l.createElement("div",null,l.createElement("div",null,l.createElement(u.A,{defaultActiveKey:"0"},l.createElement(l.Fragment,null,l.createElement("p",{className:"formHeader"},"Allow Conditions:"," ",l.createElement(Ce,{eventKey:"0"})),l.createElement(u.A.Collapse,{eventKey:"0"},l.createElement(l.Fragment,null,l.createElement("div",{className:"wrap"},l.createElement(M,{serviceDetails:C,serviceCompDetails:I,formValues:w,addPolicyItem:j,attrName:"policyItems",fetchUsersData:ge,fetchGroupsData:be,fetchRolesData:he,changePolicyItemPermissions:ie,isMultiResources:ce})),"true"==(null==I||null===(h=I.options)||void 0===h?void 0:h.enableDenyAndExceptionsInPolicies)&&l.createElement(l.Fragment,null,l.createElement("fieldset",null,l.createElement("p",{className:"wrap-header search-header"},l.createElement("i",{className:"fa-fw fa fa-exclamation-triangle fa-fw fa fa-1 text-color-red"}),"Exclude from Allow Conditions:")),l.createElement("div",{className:"wrap"},l.createElement(M,{serviceDetails:C,serviceCompDetails:I,formValues:w,addPolicyItem:j,attrName:"allowExceptions",fetchUsersData:ge,fetchGroupsData:be,fetchRolesData:he,changePolicyItemPermissions:ie,isMultiResources:ce})))))))),"true"==(null==I||null===(D=I.options)||void 0===D?void 0:D.enableDenyAndExceptionsInPolicies)&&l.createElement(l.Fragment,null,l.createElement(d.D0,{className:"form-control",name:"isDenyAllElse",render:e=>{var{input:t}=e;return l.createElement(i.A.Group,{as:r.A,className:"mb-3",controlId:"isDenyAllElse"},l.createElement(i.A.Label,{column:!0,sm:2},"Deny All Other Accesses: *"),l.createElement(o.A,{sm:1},l.createElement("span",{style:{verticalAlign:"sub"}},l.createElement(f(),ae({},t,{checked:t.value,onlabel:"True",onstyle:"primary",offlabel:"False",offstyle:"outline-secondary",size:"xs",style:"w-100",key:"isDenyAllElse"})))))}}),l.createElement(ve,{when:"isDenyAllElse",is:!1},l.createElement("div",null,l.createElement(u.A,{defaultActiveKey:"0"},l.createElement(l.Fragment,null,l.createElement("p",{className:"formHeader"},"Deny Conditions:",l.createElement(Ce,{eventKey:"0"})),l.createElement(u.A.Collapse,{eventKey:"0"},l.createElement(l.Fragment,null,l.createElement("div",{className:"wrap"},l.createElement(M,{serviceDetails:C,serviceCompDetails:I,formValues:w,addPolicyItem:j,attrName:"denyPolicyItems",fetchUsersData:ge,fetchGroupsData:be,fetchRolesData:he,changePolicyItemPermissions:ie,isMultiResources:ce})),l.createElement("fieldset",null,l.createElement("p",{className:"wrap-header search-header"},l.createElement("i",{className:"fa-fw fa fa-exclamation-triangle fa-fw fa fa-1 text-color-red"}),"Exclude from Deny Conditions:")),l.createElement("div",{className:"wrap"},l.createElement(M,{serviceDetails:C,serviceCompDetails:I,formValues:w,addPolicyItem:j,attrName:"denyExceptions",fetchUsersData:ge,fetchGroupsData:be,fetchRolesData:he,changePolicyItemPermissions:ie,isMultiResources:ce})))))))))):1==w.policyType?l.createElement("div",null,l.createElement(u.A,{defaultActiveKey:"0"},l.createElement(l.Fragment,null,l.createElement("p",{className:"formHeader"},"Mask Conditions:",l.createElement(Ce,{eventKey:"0"})),l.createElement(u.A.Collapse,{eventKey:"0"},l.createElement(l.Fragment,null,l.createElement("div",{className:"wrap"},l.createElement(M,{serviceDetails:C,serviceCompDetails:I,formValues:w,addPolicyItem:j,attrName:"dataMaskPolicyItems",fetchUsersData:ge,fetchGroupsData:be,fetchRolesData:he,changePolicyItemPermissions:ie,isMultiResources:ce}))))))):l.createElement("div",null,l.createElement("div",null,l.createElement(u.A,{defaultActiveKey:"0"},l.createElement(l.Fragment,null,l.createElement("p",{className:"wrap-header search-header"},"Row Filter Conditions:",l.createElement(Ce,{eventKey:"0"})),l.createElement(u.A.Collapse,{eventKey:"0"},l.createElement(l.Fragment,null,l.createElement("div",{className:"wrap"},l.createElement(M,{serviceDetails:C,serviceCompDetails:I,formValues:w,addPolicyItem:j,attrName:"rowFilterPolicyItems",fetchUsersData:ge,fetchGroupsData:be,fetchRolesData:he,changePolicyItemPermissions:ie,isMultiResources:ce})))))))),l.createElement("div",{className:"row form-actions"},l.createElement("div",{className:"col-md-9 offset-md-3"},l.createElement(c.A,{onClick:e=>{k&&(0,E.forIn)(O,(function(e,t){if((0,E.has)(O,"policyName")||Re(O,w)){var a,l,n,r,o,i=(null===(a=document)||void 0===a?void 0:a.getElementById("isError"))||(null===(l=document)||void 0===l?void 0:l.getElementById(t))||(null===(n=document)||void 0===n?void 0:n.querySelector("input[name=".concat(t,"]")))||(null===(r=document)||void 0===r?void 0:r.querySelector("input[id=".concat(t,"]")))||(null===(o=document)||void 0===o?void 0:o.querySelector('span[className="invalid-field"]'));(0,b.Nc)(i)}else Ie(null==O?void 0:O[t])})),x(e)},variant:"primary",size:"sm","data-id":"save","data-cy":"save"},"Save"),l.createElement(c.A,{variant:"secondary",type:"button",size:"sm",onClick:()=>{var l;l=a?R.policyType:t,p("/service/".concat(e,"/policies/").concat(l))},"data-id":"cancel","data-cy":"cancel"},"Cancel"),void 0!==a&&l.createElement(c.A,{variant:"danger",type:"button",className:"btn-sm",size:"sm",onClick:()=>{J(!0)}},"Delete")),void 0!==a&&l.createElement(m.A,{show:Z,onHide:ye},l.createElement(m.A.Header,{closeButton:!0},l.createElement("span",{className:"text-word-break"},'Are you sure want to delete policyÂ "',l.createElement("b",null,"".concat(null==w?void 0:w.policyName)),'" ?')),l.createElement(m.A.Footer,null,l.createElement(c.A,{variant:"secondary",size:"sm",title:"Cancel",onClick:ye},"Cancel"),l.createElement(c.A,{variant:"primary",size:"sm",title:"Yes",onClick:()=>Oe(a,e)},"Yes"))))))}}),l.createElement(b.Yh,{isUiBlock:ee}))))}},4468:(e,t,a)=>{a.d(t,{A:()=>N});var l=a(6942),n=a.n(l),r=a(6540),o=a(1558),i=a(6519),s=a(3855),c=a(3850),u=a(4848);const m=r.forwardRef((({as:e="div",bsPrefix:t,className:a,children:l,eventKey:o,...m},d)=>{const{activeEventKey:v}=(0,r.useContext)(c.A);return t=(0,i.oU)(t,"accordion-collapse"),(0,u.jsx)(s.A,{ref:d,in:(0,c.j)(v,o),...m,className:n()(a,t),children:(0,u.jsx)(e,{children:r.Children.only(l)})})}));m.displayName="AccordionCollapse";const d=m;var v=a(1467);const p=r.forwardRef((({as:e="div",bsPrefix:t,className:a,onEnter:l,onEntering:o,onEntered:s,onExit:c,onExiting:m,onExited:p,...f},y)=>{t=(0,i.oU)(t,"accordion-body");const{eventKey:E}=(0,r.useContext)(v.A);return(0,u.jsx)(d,{eventKey:E,onEnter:l,onEntering:o,onEntered:s,onExit:c,onExiting:m,onExited:p,children:(0,u.jsx)(e,{ref:y,...f,className:n()(a,t)})})}));p.displayName="AccordionBody";const f=p;var y=a(7385);const E=r.forwardRef((({as:e="h2",bsPrefix:t,className:a,children:l,onClick:r,...o},s)=>(t=(0,i.oU)(t,"accordion-header"),(0,u.jsx)(e,{ref:s,...o,className:n()(a,t),children:(0,u.jsx)(y.A,{onClick:r,children:l})}))));E.displayName="AccordionHeader";const g=E,b=r.forwardRef((({as:e="div",bsPrefix:t,className:a,eventKey:l,...o},s)=>{t=(0,i.oU)(t,"accordion-item");const c=(0,r.useMemo)((()=>({eventKey:l})),[l]);return(0,u.jsx)(v.A.Provider,{value:c,children:(0,u.jsx)(e,{ref:s,...o,className:n()(a,t)})})}));b.displayName="AccordionItem";const h=b,A=r.forwardRef(((e,t)=>{const{as:a="div",activeKey:l,bsPrefix:s,className:m,onSelect:d,flush:v,alwaysOpen:p,...f}=(0,o.Zw)(e,{activeKey:"onSelect"}),y=(0,i.oU)(s,"accordion"),E=(0,r.useMemo)((()=>({activeEventKey:l,onSelect:d,alwaysOpen:p})),[l,d,p]);return(0,u.jsx)(c.A.Provider,{value:E,children:(0,u.jsx)(a,{ref:t,...f,className:n()(m,y,v&&`${y}-flush`)})})}));A.displayName="Accordion";const N=Object.assign(A,{Button:y.A,Collapse:d,Item:h,Header:g,Body:f})},7385:(e,t,a)=>{a.d(t,{A:()=>d,M:()=>u});var l=a(6540),n=a(6942),r=a.n(n),o=a(3850),i=a(1467),s=a(6519),c=a(4848);function u(e,t){const{activeEventKey:a,onSelect:n,alwaysOpen:r}=(0,l.useContext)(o.A);return l=>{let o=e===a?null:e;r&&(o=Array.isArray(a)?a.includes(e)?a.filter((t=>t!==e)):[...a,e]:[e]),null==n||n(o,l),null==t||t(l)}}const m=l.forwardRef((({as:e="button",bsPrefix:t,className:a,onClick:n,...m},d)=>{t=(0,s.oU)(t,"accordion-button");const{eventKey:v}=(0,l.useContext)(i.A),p=u(v,n),{activeEventKey:f}=(0,l.useContext)(o.A);return"button"===e&&(m.type="button"),(0,c.jsx)(e,{ref:d,onClick:p,...m,"aria-expanded":Array.isArray(f)?f.includes(v):v===f,className:r()(a,t,!(0,o.j)(f,v)&&"collapsed")})}));m.displayName="AccordionButton";const d=m},3850:(e,t,a)=>{function l(e,t){return Array.isArray(e)?e.includes(t):e===t}a.d(t,{A:()=>r,j:()=>l});const n=a(6540).createContext({});n.displayName="AccordionContext";const r=n},1467:(e,t,a)=>{a.d(t,{A:()=>n});const l=a(6540).createContext({eventKey:""});l.displayName="AccordionItemContext";const n=l},3855:(e,t,a)=>{a.d(t,{A:()=>y});var l=a(6942),n=a.n(l),r=a(2660),o=a(6540),i=a(5499),s=a(923);const c=function(...e){return e.filter((e=>null!=e)).reduce(((e,t)=>{if("function"!=typeof t)throw new Error("Invalid Argument Type, must only provide functions, undefined, or null.");return null===e?t:function(...a){e.apply(this,a),t.apply(this,a)}}),null)};var u=a(5258),m=a(8073),d=a(4848);const v={height:["marginTop","marginBottom"],width:["marginLeft","marginRight"]};function p(e,t){const a=t[`offset${e[0].toUpperCase()}${e.slice(1)}`],l=v[e];return a+parseInt((0,r.A)(t,l[0]),10)+parseInt((0,r.A)(t,l[1]),10)}const f={[i.kp]:"collapse",[i.ze]:"collapsing",[i.ns]:"collapsing",[i._K]:"collapse show"},y=o.forwardRef((({onEnter:e,onEntering:t,onEntered:a,onExit:l,onExiting:r,className:i,children:v,dimension:y="height",in:E=!1,timeout:g=300,mountOnEnter:b=!1,unmountOnExit:h=!1,appear:A=!1,getDimensionValue:N=p,...D},P)=>{const x="function"==typeof y?y():y,w=(0,o.useMemo)((()=>c((e=>{e.style[x]="0"}),e)),[x,e]),k=(0,o.useMemo)((()=>c((e=>{const t=`scroll${x[0].toUpperCase()}${x.slice(1)}`;e.style[x]=`${e[t]}px`}),t)),[x,t]),S=(0,o.useMemo)((()=>c((e=>{e.style[x]=null}),a)),[x,a]),O=(0,o.useMemo)((()=>c((e=>{e.style[x]=`${N(x,e)}px`,(0,u.A)(e)}),l)),[l,N,x]),C=(0,o.useMemo)((()=>c((e=>{e.style[x]=null}),r)),[x,r]);return(0,d.jsx)(m.A,{ref:P,addEndListener:s.A,...D,"aria-expanded":D.role?E:null,onEnter:w,onEntering:k,onEntered:S,onExit:O,onExiting:C,childRef:v.ref,in:E,timeout:g,mountOnEnter:b,unmountOnExit:h,appear:A,children:(e,t)=>o.cloneElement(v,{...t,className:n()(i,v.props.className,f[e],"width"===x&&"collapse-horizontal")})})}))},1100:(e,t,a)=>{a.d(t,{A:()=>v});var l=a(6942),n=a.n(l),r=a(6540),o=a(6519),i=a(4177),s=a(2061),c=a(4848);const u=r.forwardRef((({className:e,bsPrefix:t,as:a="span",...l},r)=>(t=(0,o.oU)(t,"input-group-text"),(0,c.jsx)(a,{ref:r,className:n()(e,t),...l}))));u.displayName="InputGroupText";const m=u,d=r.forwardRef((({bsPrefix:e,size:t,hasValidation:a,className:l,as:i="div",...u},m)=>{e=(0,o.oU)(e,"input-group");const d=(0,r.useMemo)((()=>({})),[]);return(0,c.jsx)(s.A.Provider,{value:d,children:(0,c.jsx)(i,{ref:m,...u,className:n()(l,e,t&&`${e}-${t}`,a&&"has-validation")})})}));d.displayName="InputGroup";const v=Object.assign(d,{Text:m,Radio:e=>(0,c.jsx)(m,{children:(0,c.jsx)(i.A,{type:"radio",...e})}),Checkbox:e=>(0,c.jsx)(m,{children:(0,c.jsx)(i.A,{type:"checkbox",...e})})})},2061:(e,t,a)=>{a.d(t,{A:()=>n});const l=a(6540).createContext(null);l.displayName="InputGroupContext";const n=l},3943:(e,t,a)=>{a.d(t,{A:()=>c});var l=a(8168),n=a(6540),r=a(8744),o=a(4977),i=a(2836),s=a(3441);a(961),a(7003);const c=(0,n.forwardRef)((function(e,t){var a=(0,o.u)(e),c=(0,i.u)(a),u=(0,s.u)(c);return n.createElement(r.S,(0,l.A)({ref:t},u))}))}}]);